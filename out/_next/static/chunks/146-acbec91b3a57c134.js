(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[146],{95530:function(e,t,s){"use strict";s.d(t,{Z:function(){return z}});var n,l=s(57437),a=s(32902),o=s(2265),i=s(16463),r=s(79225),c=s(4410);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}var d=function(e){return c.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:"logo_svg__icon",viewBox:"0 0 1024 1024"},e),n||(n=c.createElement("path",{fill:"#333",d:"M938.667 313.643v220.245a85.333 85.333 0 0 1-86.187 85.333l-55.723-.554L585.6 318.613a85.33 85.33 0 0 0-105.195-28.522L384 334.059a54.6 54.6 0 0 1-33.28 3.882c-49.067-9.749-65.557-26.709-49.408-50.944 15.637-23.466 82.176-70.634 199.659-141.589 3.072-1.877 6.25-3.477 9.514-4.757 49.344-22.955 105.643-14.678 168.896 24.853 29.056 18.197 93.995 40 194.774 65.387a85.33 85.33 0 0 1 64.512 82.752M85.333 566.699V320a85.333 85.333 0 0 1 85.334-85.333h109.098c-5.205 5.162-12.416 12.224-21.589 21.184-13.781 13.44-18.176 23.808-17.621 44.053a68.82 68.82 0 0 0 26.005 51.904 146.48 146.48 0 0 0 140.821 23.147l60.032-21.632a85.33 85.33 0 0 1 98.88 31.402l170.432 243.968a85.333 85.333 0 0 1-26.368 122.24L511.467 869.12a54.3 54.3 0 0 1-34.56 4.48l8.81-8.832a105.856 105.856 0 0 0 0-150.059l-172.8-172.821a81.5 81.5 0 0 0-57.642-23.787 81.5 81.5 0 0 0-57.622 23.766L122.197 617.3A53.44 53.44 0 0 1 85.333 566.7m206.208 27.669 153.28 153.237c13.44 13.44 18.688 32.939 13.76 51.2l-7.722 28.907a41.34 41.34 0 0 1-26.411 28.267 42.05 42.05 0 0 1-38.507-5.675L188.864 707.072a53.013 53.013 0 0 1-6.4-80.512l32.213-32.235a54.34 54.34 0 0 1 38.4-15.85c14.464 0 28.288 5.696 38.443 15.85v.043z"})))},p=()=>{let{Footer:e}=a.Layout;return(0,l.jsx)(e,{style:{display:"flex",justifyContent:"space-between",padding:"20px",color:"var(--semi-color-text-2)",backgroundColor:"rgba(var(--semi-grey-0), 1)"},children:(0,l.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(d,{size:"large",style:{marginRight:"8px"}}),(0,l.jsx)("span",{children:"Copyright \xa9 2024 壹择科技. All Rights Reserved. "})]})})},h=s(37006),x=s(15268),g=s(20894),m=s(14892);async function f(e){return await (0,r.v)("user/passwordUpdate",e)}var y=e=>{let[t,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)();return console.log(e),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.u_,{title:"密码修改",keepDOM:!0,visible:!0,confirmLoading:t,onOk:()=>{null==n||n.validate().then(async t=>{if(t.password!==t.password2)return a.FN.error("两次密码输入不一致");s(!0);let n=await f(t);s(!1),0===n.code?await e.refresh():a.FN.error(n.msg)}).catch(e=>{console.log(e)})},style:{width:600},onCancel:()=>{e.setVisible(!1)},children:(0,l.jsxs)(a.l0,{getFormApi:e=>{i(e)},labelPosition:"left",children:[(0,l.jsx)(a.l0.Input,{showClear:!0,field:"old_password",label:"原密码"}),(0,l.jsx)(a.l0.Input,{showClear:!0,type:"password",field:"password",label:"新密码"}),(0,l.jsx)(a.l0.Input,{showClear:!0,type:"password",field:"password2",label:"重复密码"})]})})})},j=e=>{var t;let{Header:s}=a.Layout,[n,r]=(0,o.useState)(!1),c=(0,i.useRouter)();return(0,l.jsxs)(s,{style:{backgroundColor:"var(--semi-color-bg-1)"},children:[n&&(0,l.jsx)(y,{refresh:()=>{localStorage.removeItem("access_token"),c.push("/Login")},setVisible:()=>r(!1)}),(0,l.jsx)(a.JL,{mode:"horizontal",footer:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.zx,{theme:"borderless",icon:(0,l.jsx)(h.Z,{size:"large"}),style:{color:"var(--semi-color-text-2)",marginRight:"12px"}}),(0,l.jsx)(a.Lt,{position:"bottomLeft",render:(0,l.jsxs)(a.Lt.Menu,{children:[(0,l.jsx)(a.Lt.Item,{onClick:()=>r(!n),icon:(0,l.jsx)(x.Z,{}),children:"修改密码"}),(0,l.jsx)(a.Lt.Item,{onClick:()=>{let e=a.FN.info({icon:(0,l.jsx)(g.Z,{}),content:"正在退出\xb7\xb7\xb7"});localStorage.removeItem("access_token"),c.push("/Login"),a.FN.close(e)},icon:(0,l.jsx)(m.Z,{}),children:"退出登录"})]}),children:(0,l.jsx)(a.qE,{color:"orange",size:"small",children:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.name})})]})})]})},v=s(62509),b=s(17863),w=s(7931),C=s(49256),L=s(73600),S=s(20211),k=s(42132),I=e=>{let{Sider:t}=a.Layout,s=(0,i.useRouter)(),n=(0,i.usePathname)(),[r,c]=(0,o.useState)(n.substring(1)||"Home");return(0,l.jsx)(t,{style:{backgroundColor:"rgb(242, 242, 244)"},children:(0,l.jsx)(a.JL,{defaultSelectedKeys:[r],selectedKeys:[r],style:{maxWidth:220,height:"100%",backgroundColor:"var(--color-fill-0)"},items:[{itemKey:"Home",text:"首页",icon:(0,l.jsx)(v.Z,{size:"large"})},{itemKey:"Data",text:"基础数据",icon:(0,l.jsx)(b.Z,{size:"large"})},{itemKey:"Project",text:"广告管理",icon:(0,l.jsx)(w.Z,{size:"large"})},{itemKey:"Custom",text:"客户管理",icon:(0,l.jsx)(C.Z,{size:"large"})},{itemKey:"ShortLink",text:"短链管理",icon:(0,l.jsx)(L.Z,{size:"large"})},{itemKey:"Account",text:"账号管理",icon:(0,l.jsx)(S.Z,{size:"large"})},{itemKey:"Setting",text:"系统设置",icon:(0,l.jsx)(k.Z,{size:"large"})}],header:{logo:(0,l.jsx)(d,{style:{fontSize:36}}),text:"壹择短链",style:{paddingBottom:"12px"}},footer:{collapseButton:!0},onSelect:e=>{s.push("/"+e.itemKey)}})})},z=e=>{let{children:t}=e,{Content:s}=a.Layout,n=function(e,t){let[s,n]=(0,o.useState)(null),[l,a]=(0,o.useState)(!1),c=(0,i.useRouter)();return(0,o.useEffect)(()=>{let s=localStorage.getItem("user");s&&n(JSON.parse(s));let o=async()=>{let{data:s,code:o}=await (0,r.U)("user/current",{}),i=!!s;n(0===o?s:null),0===o&&localStorage.setItem("user",JSON.stringify(s)),a(!0),e&&l&&(e&&!t&&!i||t&&i)&&c.push(e)};s||o()},[e,t,l,c]),s}("/Login",!1);return(0,l.jsxs)(a.Layout,{style:{height:"100%"},children:[(0,l.jsx)(I,{user:n}),(0,l.jsxs)(a.Layout,{children:[(0,l.jsx)(j,{user:n}),(0,l.jsx)(s,{style:{padding:"12px",backgroundColor:"#f9f9fa"},children:(0,l.jsx)("div",{style:{borderRadius:"10px",border:"1px solid var(--semi-color-border)",height:"auto",backgroundColor:"var(--semi-color-bg-0)",padding:"24px"},children:t})}),(0,l.jsx)(p,{})]})]})}},15578:function(e,t,s){"use strict";var n=s(57437),l=s(32902),a=s(2265),o=s(19212),i=s.n(o),r=s(73975),c=s.n(r);t.Z=e=>{let[t,s]=(0,a.useState)(),o=e=>{if(!e)return e;for(let t in e)if(e[t]instanceof Date)e[t]=i()(e[t]).format("YYYY-MM-DD HH:mm:ss");else if(e[t]instanceof Array)for(let s in e[t])e[t][s]instanceof Date&&(e[t][s]=i()(e[t][s]).format("YYYY-MM-DD HH:mm:ss"));return e};return(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,n.jsxs)(l.l0,{layout:"horizontal",className:c().form,labelPosition:"left",getFormApi:e=>{s(e)},initValues:null==e?void 0:e.initValues,children:[e.fields.map(e=>{if(void 0!==e.search&&!1!==e.search){if("input"==e.type||!e.type)return(0,n.jsx)(l.l0.Input,{showClear:!0,label:e.title,field:e.dataIndex},"search."+e.dataIndex);if("select"==e.type)return(0,n.jsxs)(l.l0.Select,{label:e.title,field:e.dataIndex,initValue:-1,children:[(0,n.jsx)(l.l0.Select.Option,{label:"--请选择--",value:-1},"search.options"+e.id),e.options.map((t,s)=>(0,n.jsx)(l.l0.Select.Option,{label:t.label,value:t.value},"search.options."+e.dataIndex+"."+s))]},"search."+e.dataIndex);if("dateRange"==e.type)return(0,n.jsx)(l.l0.DatePicker,{type:"dateRange",label:e.title,field:e.dataIndex},"search."+e.dataIndex);if("dateTimeRange"==e.type)return(0,n.jsx)(l.l0.DatePicker,{type:"dateTimeRange",label:e.title,field:e.dataIndex},"search."+e.dataIndex)}}),(0,n.jsx)(l.zx,{style:{marginLeft:"auto"},type:"secondary",onClick:()=>{null==t||t.reset(),e.onSubmit({})},children:"重置"}),(0,n.jsx)(l.zx,{style:{marginLeft:"12px"},theme:"outline",type:"primary",onClick:()=>e.onSubmit(o(null==t?void 0:t.getValues())),children:"搜索"})]}),(0,n.jsx)(l.iz,{style:{padding:"0 0 0 0"}})]})}},79225:function(e,t,s){"use strict";s.d(t,{U:function(){return l},v:function(){return a}});var n=s(32902);async function l(e,t){let s="";if(t){for(let e in t)s+="&"+e+"="+t[e];s="?"+s.substring(1)}let l={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(l.Authorization=localStorage.getItem("access_token"));let a=await fetch("https://crm.yizetech.com.cn/api/"+e+s,{method:"GET",headers:l}),o=a.json();return 429===a.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===a.status?window.location.href="/Login":200!==a.status&&n.P_.open({title:"系统通知",content:"接口异常"}),o}async function a(e,t){let s={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(s.Authorization=localStorage.getItem("access_token"));let l=await fetch("https://crm.yizetech.com.cn/api/"+e,{method:"POST",headers:s,body:JSON.stringify({...t})}),a=await l.json();return 429===l.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===l.status?window.location.href="/Login":200!==l.status&&n.P_.open({title:"系统通知",content:"接口异常"}),a}},44900:function(e,t,s){"use strict";var n=s(2265);let l=(0,s(26018).A)(function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38055 2C9.00251 2 8.65678 2.21319 8.48703 2.55098L7.00505 5.5H3C2.44772 5.5 2 5.94772 2 6.5V7.5C2 8.05228 2.44772 8.5 3 8.5H21C21.5523 8.5 22 8.05228 22 7.5V6.5C22 5.94772 21.5523 5.5 21 5.5H16.9949L15.5129 2.55098C15.3432 2.21319 14.9975 2 14.6194 2H9.38055ZM14.8571 5.5L14.1439 4.25193C14.0549 4.09614 13.8893 4 13.7098 4H10.2901C10.1107 4 9.94505 4.09614 9.85602 4.25193L9.14284 5.5H14.8571ZM18.7192 10H5.28078C4.6302 10 4.15285 10.6114 4.31063 11.2425L6.4319 19.7276C6.76578 21.0631 7.96573 22 9.34233 22H14.6577C16.0343 22 17.2342 21.0631 17.5681 19.7276L19.6894 11.2425C19.8472 10.6114 19.3698 10 18.7192 10Z",fill:"currentColor"}))},"delete");t.Z=l},73975:function(e){e.exports={form:"search_form__Moi62"}}}]);