(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{45142:function(e,t,i){Promise.resolve().then(i.bind(i,93493))},93493:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=i(57437),o=i(47775),l=i(32902),r=i(2265),s=i(79225);async function a(e){return await (0,s.U)("auth/qrcode",e)}async function c(e){return await (0,s.v)("auth/login",e)}var d=i(66648),u=i(16463);i(44638);var p=i(20357),h=()=>{let[e,t]=(0,r.useState)({img:"",key:""}),[i,s]=(0,r.useState)(),[h,g]=(0,r.useState)(!1),f=(0,u.useRouter)(),y=async()=>{let e=await a({});0===e.code&&t(e.data)},x=async()=>{if(!(null==i?void 0:i.getValue("mobile")))return l.FN.error("手机号不能为空");if(!/^1\d{10}$/.test(i.getValue("mobile")))return l.FN.error("手机号不正确");if(!(null==i?void 0:i.getValue("password")))return l.FN.error("密码不能为空");if(!(null==i?void 0:i.getValue("qrcode")))return l.FN.error("验证码不能为空");if(!(null==i?void 0:i.getValue("agree")))return l.FN.error("请先同意协议");g(!0);let t=await c({...null==i?void 0:i.getValues(),key:e.key});console.log(t),0===t.code?(localStorage.setItem("access_token",t.data.token_type+" "+t.data.access_token),f.push("/Home")):l.FN.error(t.msg),g(!1)};return(0,r.useEffect)(()=>{y()},[]),(0,n.jsxs)("div",{style:{position:"relative",height:"100%",overflow:"hidden"},children:[(0,n.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",backgroundColor:"rgba(243, 243, 243, 0.8)"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"12px 24px",width:"260px"},children:[(0,n.jsx)("div",{children:(0,n.jsx)(o.Z,{style:{fontSize:36}})}),(0,n.jsxs)("div",{style:{paddingTop:"0px",fontSize:"24px"},children:[p.env.NEXT_PUBLIC_TITLE,"平台"]})]})}),(0,n.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"100%",height:"100%"},children:(0,n.jsxs)("div",{style:{backgroundColor:"#FFFFFF",width:"400px",height:"360px",margin:"auto",marginTop:"13%",padding:"24px",border:"solid 12px #F3F3F3",borderRadius:"12px"},children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)("div",{style:{paddingTop:"0px",fontSize:"20px"},children:"账号登录"})}),(0,n.jsxs)(l.l0,{labelPosition:"left",getFormApi:e=>{s(e)},labelAlign:"left",style:{padding:"10px",width:332},children:[(0,n.jsx)(l.l0.Input,{field:"mobile",placeholder:"手机号",noLabel:!0,trigger:"blur",style:{width:312}}),(0,n.jsx)(l.l0.Input,{field:"password",type:"password",placeholder:"密码",noLabel:!0,style:{width:312},trigger:"blur"}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(l.l0.Input,{field:"qrcode",placeholder:"验证码",noLabel:!0,trigger:"blur",style:{width:212}}),e.img?(0,n.jsx)(d.default,{title:"点击更换",onClick:async()=>await y(),alt:"验证码",width:88,height:42,style:{marginLeft:"12px",height:"42px",width:"88px",paddingTop:"12px"},src:e.img}):null]}),(0,n.jsx)(l.zx,{theme:"outline",loading:h,onClick:x,style:{width:312},type:"primary",children:"登录"}),(0,n.jsx)(l.l0.Checkbox,{field:"agree",style:{fontSize:"12px",color:"#EEEEEE"},noLabel:!0,children:"同意我们的《用户协议》和《隐私政策》"})]})]})})]})}},79225:function(e,t,i){"use strict";i.d(t,{U:function(){return o},v:function(){return l}});var n=i(32902);async function o(e,t){let i="";if(t){for(let e in t)i+="&"+e+"="+t[e];i="?"+i.substring(1)}let o={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(o.Authorization=localStorage.getItem("access_token"));let l=await fetch("https://crm.yizetech.com.cn/api/"+e+i,{method:"GET",headers:o}),r=l.json();return 429===l.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===l.status?window.location.href="/Login":200!==l.status&&n.P_.open({title:"系统通知",content:"接口异常"}),r}async function l(e,t){let i={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(i.Authorization=localStorage.getItem("access_token"));let o=await fetch("https://crm.yizetech.com.cn/api/"+e,{method:"POST",headers:i,body:JSON.stringify({...t})}),l=await o.json();return 429===o.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===o.status?window.location.href="/Login":200!==o.status&&n.P_.open({title:"系统通知",content:"接口异常"}),l}},44638:function(){}},function(e){e.O(0,[914,966,912,971,23,744],function(){return e(e.s=45142)}),_N_E=e.O()}]);