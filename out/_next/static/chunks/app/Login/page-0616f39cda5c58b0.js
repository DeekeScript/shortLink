(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{45142:function(e,t,n){Promise.resolve().then(n.bind(n,93493))},93493:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n(57437),o=n(47775),l=n(213),r=n(2265),s=n(79225);async function a(e){return await (0,s.U)("auth/qrcode",e)}async function c(e){return await (0,s.v)("auth/login",e)}var d=n(66648),u=n(16463);n(44638);var p=n(20357),h=()=>{let[e,t]=(0,r.useState)({img:"",key:""}),[n,s]=(0,r.useState)(),h=(0,u.useRouter)(),g=async()=>{let e=await a({});0===e.code&&t(e.data)},f=async()=>{if(!(null==n?void 0:n.getValue("mobile")))return l.FN.error("手机号不能为空");if(!/^1\d{10}$/.test(n.getValue("mobile")))return l.FN.error("手机号不正确");if(!(null==n?void 0:n.getValue("password")))return l.FN.error("密码不能为空");if(!(null==n?void 0:n.getValue("qrcode")))return l.FN.error("验证码不能为空");if(!(null==n?void 0:n.getValue("agree")))return l.FN.error("请先同意协议");let t=await c({...null==n?void 0:n.getValues(),key:e.key});console.log(t),0===t.code?(localStorage.setItem("access_token",t.data.token_type+" "+t.data.access_token),h.push("/Home")):l.FN.error(t.msg)};return(0,r.useEffect)(()=>{g()},[]),(0,i.jsxs)("div",{style:{position:"relative",height:"100%",overflow:"hidden"},children:[(0,i.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",backgroundColor:"rgba(243, 243, 243, 0.8)"},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"12px 24px",width:"260px"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,{style:{fontSize:36}})}),(0,i.jsxs)("div",{style:{paddingTop:"0px",fontSize:"24px"},children:[p.env.NEXT_PUBLIC_TITLE,"平台"]})]})}),(0,i.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"100%",height:"100%"},children:(0,i.jsxs)("div",{style:{backgroundColor:"#FFFFFF",width:"400px",height:"360px",margin:"auto",marginTop:"13%",padding:"24px",border:"solid 12px #F3F3F3",borderRadius:"12px"},children:[(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,i.jsx)("div",{style:{paddingTop:"0px",fontSize:"20px"},children:"账号登录"})}),(0,i.jsxs)(l.l0,{labelPosition:"left",getFormApi:e=>{s(e)},labelAlign:"left",style:{padding:"10px",width:332},children:[(0,i.jsx)(l.l0.Input,{field:"mobile",placeholder:"手机号",noLabel:!0,trigger:"blur",style:{width:312}}),(0,i.jsx)(l.l0.Input,{field:"password",type:"password",placeholder:"密码",noLabel:!0,style:{width:312},trigger:"blur"}),(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(l.l0.Input,{field:"qrcode",placeholder:"验证码",noLabel:!0,trigger:"blur",style:{width:212}}),e.img?(0,i.jsx)(d.default,{onClick:async()=>await g(),alt:"验证码",width:88,height:42,style:{marginLeft:"12px",height:"42px",width:"88px",paddingTop:"12px"},src:e.img}):null]}),(0,i.jsx)(l.zx,{theme:"outline",onClick:f,style:{width:312},type:"primary",children:"登录"}),(0,i.jsx)(l.l0.Checkbox,{field:"agree",style:{fontSize:"12px",color:"#EEEEEE"},noLabel:!0,children:"同意我们的《用户协议》和《隐私政策》"})]})]})})]})}},79225:function(e,t,n){"use strict";n.d(t,{U:function(){return o},v:function(){return l}});var i=n(213);async function o(e,t){let n="";if(t){for(let e in t)n+="&"+e+"="+t[e];n="?"+n.substring(1)}let o={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(o.Authorization=localStorage.getItem("access_token"));let l=await fetch("https://crm.yizetech.com.cn/api/"+e+n,{method:"GET",headers:o}),r=await l.json();return 429===l.status?i.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===l.status?i.P_.open({title:"系统通知",content:"登录失效"}):200!==l.status&&i.P_.open({title:"系统通知",content:"接口异常"}),r}async function l(e,t){let n={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(n.Authorization=localStorage.getItem("access_token"));let o=await fetch("https://crm.yizetech.com.cn/api/"+e,{method:"POST",headers:n,body:JSON.stringify({...t})}),l=await o.json();return 429===o.status?i.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===o.status?i.P_.open({title:"系统通知",content:"登录失效"}):200!==o.status&&i.P_.open({title:"系统通知",content:"接口异常"}),l}},44638:function(){}},function(e){e.O(0,[330,324,648,971,23,744],function(){return e(e.s=45142)}),_N_E=e.O()}]);