(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{92951:function(e,t,i){Promise.resolve().then(i.bind(i,13551))},13551:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Z}});var l=i(57437),n=i(78833),a=i(20798),r=i(44900),s=i(2265),d=i(26018);let c=(0,d.A)(function(e){return s.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 2.89543 2.89543 2 4 2H9C10.1046 2 11 2.89543 11 4V9C11 10.1046 10.1046 11 9 11H4C2.89543 11 2 10.1046 2 9V4ZM9 4H4V9H9V4ZM2 15C2 13.8954 2.89543 13 4 13H9C10.1046 13 11 13.8954 11 15V20C11 21.1046 10.1046 22 9 22H4C2.89543 22 2 21.1046 2 20V15ZM9 15H4V20H9V15ZM15 2C13.8954 2 13 2.89543 13 4V9C13 10.1046 13.8954 11 15 11H20C21.1046 11 22 10.1046 22 9V4C22 2.89543 21.1046 2 20 2H15ZM15 4H20V9H15V4ZM5 5.5C5 5.22386 5.22386 5 5.5 5H7.5C7.77614 5 8 5.22386 8 5.5V7.5C8 7.77614 7.77614 8 7.5 8H5.5C5.22386 8 5 7.77614 5 7.5V5.5ZM16.5 5C16.2239 5 16 5.22386 16 5.5V7.5C16 7.77614 16.2239 8 16.5 8H18.5C18.7761 8 19 7.77614 19 7.5V5.5C19 5.22386 18.7761 5 18.5 5H16.5ZM5 16.5C5 16.2239 5.22386 16 5.5 16H7.5C7.77614 16 8 16.2239 8 16.5V18.5C8 18.7761 7.77614 19 7.5 19H5.5C5.22386 19 5 18.7761 5 18.5V16.5ZM13.5 13C13.2239 13 13 13.2239 13 13.5V15.5C13 15.7761 13.2239 16 13.5 16H15.5C15.7761 16 16 15.7761 16 15.5V13.5C16 13.2239 15.7761 13 15.5 13H13.5ZM16 16.5C16 16.2239 16.2239 16 16.5 16H18.5C18.7761 16 19 16.2239 19 16.5V18.5C19 18.7761 18.7761 19 18.5 19H16.5C16.2239 19 16 18.7761 16 18.5V16.5ZM19.5 13C19.2239 13 19 13.2239 19 13.5V15.5C19 15.7761 19.2239 16 19.5 16H21.5C21.7761 16 22 15.7761 22 15.5V13.5C22 13.2239 21.7761 13 21.5 13H19.5ZM13 19.5C13 19.2239 13.2239 19 13.5 19H15.5C15.7761 19 16 19.2239 16 19.5V21.5C16 21.7761 15.7761 22 15.5 22H13.5C13.2239 22 13 21.7761 13 21.5V19.5ZM19.5 19C19.2239 19 19 19.2239 19 19.5V21.5C19 21.7761 19.2239 22 19.5 22H21.5C21.7761 22 22 21.7761 22 21.5V19.5C22 19.2239 21.7761 19 21.5 19H19.5Z",fill:"currentColor"}))},"qr_code"),o=(0,d.A)(function(e){return s.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4885 4.18603C14.5912 3.364 14.0081 2.61431 13.1861 2.51156C12.3641 2.4088 11.6144 2.99189 11.5116 3.81392L9.51162 19.8139C9.40886 20.636 9.99195 21.3856 10.814 21.4884C11.636 21.5911 12.3857 21.0081 12.4885 20.186L14.4885 4.18603ZM8.06066 5.93931C8.64645 6.5251 8.64645 7.47485 8.06066 8.06063L4.12132 12L8.06066 15.9393C8.64645 16.5251 8.64645 17.4748 8.06066 18.0606C7.47487 18.6464 6.52513 18.6464 5.93934 18.0606L0.93934 13.0606C0.353553 12.4748 0.353553 11.5251 0.93934 10.9393L5.93934 5.93931C6.52513 5.35353 7.47487 5.35353 8.06066 5.93931ZM15.9393 5.93931C16.5251 5.35353 17.4749 5.35353 18.0607 5.93931L23.0607 10.9393C23.6464 11.5251 23.6464 12.4748 23.0607 13.0606L18.0607 18.0606C17.4749 18.6464 16.5251 18.6464 15.9393 18.0606C15.3536 17.4748 15.3536 16.5251 15.9393 15.9393L19.8787 12L15.9393 8.06063C15.3536 7.47485 15.3536 6.5251 15.9393 5.93931Z",fill:"currentColor"}))},"code");var u=i(32902),h=i(7893),C=i(95530),x=i(15578),p=i(15268),v=i(63993),j=i(79225);async function g(e){return await (0,j.U)("shortLink/list",e)}async function f(e){return await (0,j.U)("project/idTitle",e)}async function m(e){return await (0,j.v)("shortLink/add",e)}async function w(e){return await (0,j.v)("shortLink/update",e)}async function y(e){return await (0,j.v)("shortLink/remove",e)}var V=e=>{let[t,i]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!1),[r,d]=(0,s.useState)(),[c,o]=(0,s.useState)(e.values),[h,C]=(0,s.useState)([]),x=()=>{i(!0)};return(0,s.useEffect)(()=>{(async()=>{let e=await f({});e&&0===e.code&&(console.log(e.data.map(e=>({label:e.title,value:e.id}))),C(e.data))})()},[]),(0,l.jsxs)(l.Fragment,{children:[(null==c?void 0:c.id)?(0,l.jsx)(u.zx,{onClick:x,type:"secondary",icon:(0,l.jsx)(p.Z,{}),"aria-label":"编辑"}):(0,l.jsx)(u.zx,{onClick:x,theme:"outline",type:"primary",icon:(0,l.jsx)(v.Z,{}),children:"添加短链"}),(0,l.jsx)(u.u_,{title:"编辑短链",keepDOM:!0,visible:t,onOk:()=>{null==r||r.validate().then(async l=>{let n;a(!0),n=c&&c.id?await w(l):await m(l),a(!1),0===n.code?(await e.refresh(),i(!t)):u.FN.error(n.msg)}).catch(e=>{console.log(e)})},confirmLoading:n,style:{width:600},onCancel:()=>{i(!1)},children:(0,l.jsxs)(u.l0,{getFormApi:e=>{d(e)},labelPosition:"left",initValues:c,children:[(0,l.jsx)(u.l0.Input,{field:"title",initValue:c?c.title:"",label:"标题"}),(0,l.jsxs)(u.l0.Select,{initValue:c?c.project_id:"-1",field:"project_id",label:"广告",children:[(0,l.jsx)(u.l0.Select.Option,{value:"-1",children:"--请选择--"}),h.map(e=>(0,l.jsx)(u.l0.Select.Option,{value:e.id,children:e.title},e.id))]}),(0,l.jsxs)(u.l0.Select,{initValue:c?""+c.status:"-1",field:"status",label:{text:"状态",optional:!1},children:[(0,l.jsx)(u.l0.Select.Option,{value:"-1",children:"--请选择--"}),(0,l.jsx)(u.l0.Select.Option,{value:"0",children:"待投放"}),(0,l.jsx)(u.l0.Select.Option,{value:"1",children:"已投放"})]}),(0,l.jsx)(u.l0.TextArea,{field:"remark",initValue:c?c.remark:"",label:"备注"})]})})]})},Z=()=>{let[e,t]=(0,s.useState)({}),i=[{title:"标题",dataIndex:"title",search:!0,render:(e,t)=>"".concat(t.title),onFilter:(e,t)=>t.title.includes(e)},{title:"广告标题",dataIndex:"project_title",search:!0,render:(e,t)=>{var i;return"".concat(null==t?void 0:null===(i=t.project)||void 0===i?void 0:i.title)}},{title:"短链",dataIndex:"url",search:!0,render:e=>(0,l.jsx)("a",{target:"_blank",href:e,children:e})},{title:"备注",search:!0,dataIndex:"remark",render:e=>(0,l.jsx)("a",{target:"_blank",href:e,children:e})},{title:"状态",dataIndex:"status",render:e=>{let t={1:{color:"pink",prefixIcon:(0,l.jsx)(n.Z,{}),text:"已投放"},0:{color:"cyan",prefixIcon:(0,l.jsx)(a.Z,{}),text:"待投放"}}[e]||{};return(0,l.jsx)(u.Vp,{shape:"circle",...t,style:{userSelect:"text"},children:t.text})}},{title:"所有者",dataIndex:"name",render:(e,t,i)=>{var n;return(0,l.jsx)(u.T,{children:(0,l.jsx)(u.qE,{size:"small",color:"red",style:{marginRight:4},children:(null==t?void 0:null===(n=t.user)||void 0===n?void 0:n.name)||"-"})})}},{title:"更新日期",dataIndex:"updated_at",sorter:(e,t)=>e.updateTime-t.updateTime>0?1:-1,render:e=>h.Z(new Date(e),"yyyy-MM-dd")},{title:"创建日期",dataIndex:"created_at",search:!0,type:"dateRange",sorter:(e,t)=>e.updateTime-t.updateTime>0?1:-1,render:e=>h.Z(new Date(e),"yyyy-MM-dd")},{title:"操作",width:170,dataIndex:"id",render:(e,t)=>(0,l.jsxs)(u.T,{children:[(0,l.jsx)(V,{values:t,refresh:()=>M(m)}),(0,l.jsx)(u.gn,{title:"确认删除吗？",onConfirm:async()=>await k(e),position:"leftBottom",children:(0,l.jsx)("div",{children:(0,l.jsx)(u.zx,{type:"danger",icon:(0,l.jsx)(r.Z,{}),"aria-label":"删除"})})}),(0,l.jsx)(u.zx,{onClick:()=>{u.u_.success({title:"企微获客二维码",content:(0,l.jsx)("div",{style:{paddingTop:"12px"},children:(0,l.jsx)("img",{src:t.qiwei_qrcode,width:200})}),width:240,cancelButtonProps:{hidden:!0}})},type:"secondary",icon:(0,l.jsx)(c,{}),"aria-label":"企微二维码"}),(0,l.jsx)(u.zx,{onClick:()=>{var e,i,n;let a="<div>\n    <img src='"+t.url+"?type=0' width=0 height=0 />\n    <a target='_blank' href='"+t.url+"?type=1'>"+(null==t?void 0:null===(e=t.project)||void 0===e?void 0:e.title)+"</a>\n</div>",r=(0,l.jsxs)("div",{children:[(0,l.jsx)("img",{src:t.url,width:0,height:0}),(0,l.jsx)("a",{target:"_blank",style:{textDecoration:"underline",color:"#0000FF"},href:t.url+"?type=1",children:null==t?void 0:null===(i=t.project)||void 0===i?void 0:i.title})]}),s=(0,l.jsxs)("div",{children:[(0,l.jsx)("img",{src:t.url,width:0,height:0}),(0,l.jsx)("a",{target:"_blank",style:{textDecoration:"underline",color:"#0000FF"},href:t.url+"?type=2",children:null==t?void 0:null===(n=t.project)||void 0===n?void 0:n.title})]});u.u_.success({width:800,title:"广告代码",content:(0,l.jsxs)("div",{children:[(0,l.jsx)(u.Kx,{defaultValue:a}),(0,l.jsx)(u.iz,{style:{margin:"12px 0"}}),r,(0,l.jsx)(u.jL,{style:{margin:"12px 0"},type:"info",description:"默认广告链接会进入对应广告配置的地址，如果想直接进入企业微信二维码界面，请将<a>标签内的type改为2即可，效果如下：",closeIcon:null}),s]})})},type:"secondary",icon:(0,l.jsx)(o,{}),"aria-label":"广告代码"})]})}],d=async e=>await g(e),[p,v]=(0,s.useState)([]),[j,f]=(0,s.useState)(!1),[m,w]=(0,s.useState)(1),[Z,b]=(0,s.useState)(0),H=async e=>{f(!0),w(e.page||1);let t=await d(e);b(t.total),v(t.data),f(!1)},M=t=>{e.page=t,H(e)},k=async e=>{let t=await y({id:e});0===t.code?(u.FN.success(t.msg),M(m)):u.FN.error(t.msg)};return(0,s.useEffect)(()=>{H({})},[]),(0,l.jsxs)(C.Z,{children:[(0,l.jsx)(x.Z,{fields:i,onSubmit:e=>{e.page=1,H(e)}}),(0,l.jsx)("div",{style:{textAlign:"right",paddingBottom:"12px"},children:(0,l.jsx)(V,{values:void 0,refresh:()=>M(m)})}),(0,l.jsx)(u.iA,{columns:i,dataSource:p,pagination:{currentPage:m,pageSize:10,total:Z,onPageChange:M},loading:j})]})}},78833:function(e,t,i){"use strict";var l=i(2265);let n=(0,i(26018).A)(function(e){return l.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),l.createElement("path",{d:"M12 23C18.075 23 23 18.075 23 12C23 5.925 18.075 1 12 1C5.925 1 1 5.925 1 12C1 18.075 5.925 23 12 23ZM19.857 12C19.8568 13.5605 19.392 15.0855 18.5217 16.3808C17.6515 17.676 16.4153 18.6828 14.9706 19.2728C13.526 19.8628 11.9384 20.0093 10.4103 19.6936C8.88208 19.3778 7.48253 18.6142 6.39 17.5L12 12V4.143C14.0838 4.143 16.0823 4.97079 17.5557 6.44426C19.0292 7.91774 19.857 9.91619 19.857 12Z",fill:"currentColor"}))},"duration");t.Z=n},63993:function(e,t,i){"use strict";var l=i(2265);let n=(0,i(26018).A)(function(e){return l.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),l.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))},"plus");t.Z=n}},function(e){e.O(0,[293,990,966,311,146,971,23,744],function(){return e(e.s=92951)}),_N_E=e.O()}]);