(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{57593:function(e,t,a){Promise.resolve().then(a.bind(a,22188))},22188:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(57437),i=a(44900),l=a(32902),r=a(7893),s=a(2265),d=a(95530),o=a(15578),c=a(15268),u=a(63993),h=a(79225);async function x(e){return await (0,h.U)("custom/list",e)}async function v(e){return await (0,h.v)("customBuy/add",e)}async function m(e){return await (0,h.v)("custom/update",e)}async function w(e){return await (0,h.v)("custom/remove",e)}var f=e=>{let[t,a]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1),[d,o]=(0,s.useState)(),[h,x]=(0,s.useState)(e.values),w=()=>{a(!0)};return(0,n.jsxs)(n.Fragment,{children:[(null==h?void 0:h.id)?(0,n.jsx)(l.zx,{onClick:w,type:"secondary",icon:(0,n.jsx)(c.Z,{}),"aria-label":"编辑"}):(0,n.jsx)(l.zx,{onClick:w,theme:"outline",type:"primary",icon:(0,n.jsx)(u.Z,{}),children:"添加短链"}),(0,n.jsx)(l.u_,{title:"编辑",keepDOM:!0,visible:t,onOk:()=>{null==d||d.validate().then(async n=>{let i;r(!0),i=h&&h.id?await m(n):await v(n),r(!1),0===i.code?(await e.refresh(),a(!t)):l.FN.error(i.msg)}).catch(e=>{console.log(e)})},confirmLoading:i,style:{width:600},onCancel:()=>{a(!1)},children:(0,n.jsxs)(l.l0,{getFormApi:e=>{o(e)},labelPosition:"left",initValues:h,children:[(0,n.jsxs)(l.l0.Select,{initValue:h?""+h.status:"-1",field:"status",label:{text:"类型",optional:!1},children:[(0,n.jsx)(l.l0.Select.Option,{value:"-1",children:"--请选择--"}),(0,n.jsx)(l.l0.Select.Option,{value:"0",children:"咨询"}),(0,n.jsx)(l.l0.Select.Option,{value:"1",children:"成交"})]}),(0,n.jsx)(l.l0.TextArea,{field:"remark",initValue:h?h.remark:"",label:"备注"})]})})]})},g=()=>{let e=[{title:"广告标题",dataIndex:"project",width:150,render:(e,t)=>{var a,n;return"".concat(null==t?void 0:null===(n=t.short_link)||void 0===n?void 0:null===(a=n.project)||void 0===a?void 0:a.title)}},{title:"短链",width:150,dataIndex:"short_link",search:!0,render:(e,t)=>{var a,i;return(0,n.jsx)("a",{target:"_blank",href:null==t?void 0:null===(a=t.short_link)||void 0===a?void 0:a.url,children:null==t?void 0:null===(i=t.short_link)||void 0===i?void 0:i.url})}},{title:"昵称",width:150,search:!0,dataIndex:"nickname",render:e=>"".concat(e)},{title:"头像",dataIndex:"avatar",width:80,render:(e,t)=>(0,n.jsx)(l.qE,{src:e,size:"small",color:"red",style:{marginRight:4}})},{title:"所有者",dataIndex:"user_id",width:80,render:(e,t)=>{var a;return(0,n.jsx)(l.qE,{size:"small",color:"red",style:{marginRight:4},children:(null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.name)||"-"})}},{title:"备注",dataIndex:"remark",width:180,search:!0,render:e=>e?(0,n.jsx)(l.Sx.Text,{ellipsis:{showTooltip:!0},children:e}):"-"},{title:"更新日期",width:120,dataIndex:"updated_at",render:e=>r.Z(new Date(e),"yyyy-MM-dd")},{title:"创建日期",width:120,search:!0,type:"dateRange",dataIndex:"created_at",render:e=>r.Z(new Date(e),"yyyy-MM-dd")},{title:"操作",width:90,dataIndex:"id",render:(e,t)=>(0,n.jsxs)(l.T,{children:[(0,n.jsx)(f,{values:t,refresh:()=>S(v)}),(0,n.jsx)(l.gn,{title:"确认删除吗？",onConfirm:async()=>await C(e),position:"leftBottom",children:(0,n.jsx)("div",{children:(0,n.jsx)(l.zx,{type:"danger",icon:(0,n.jsx)(i.Z,{}),"aria-label":"删除"})})})]})}],t=async e=>await x(e),[a,c]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[v,m]=(0,s.useState)(1),[g,p]=(0,s.useState)(0),[j,y]=(0,s.useState)({}),k=async e=>{h(!0),m(e.page),y(e);let a=await t(e);p(a.total),c(a.data),h(!1)},S=e=>{j.page=e,k(j)},C=async e=>{let t=await w({id:e});0===t.code?(l.FN.success(t.msg),S(j)):l.FN.error(t.msg)};return(0,s.useEffect)(()=>{k({})},[]),(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(o.Z,{fields:e,onSubmit:e=>{e.page=1,console.log(e),k(e)}}),(0,n.jsx)(l.iA,{columns:e,dataSource:a,pagination:{currentPage:v,pageSize:10,total:g,onPageChange:S},loading:u})]})}},63993:function(e,t,a){"use strict";var n=a(2265);let i=(0,a(26018).A)(function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))},"plus");t.Z=i}},function(e){e.O(0,[293,990,966,311,146,971,23,744],function(){return e(e.s=57593)}),_N_E=e.O()}]);