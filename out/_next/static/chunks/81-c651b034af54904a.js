(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{7320:function(e,t,s){"use strict";var n,a=s(4410);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(null,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:"logo_svg__icon",viewBox:"0 0 1024 1024"},e),n||(n=a.createElement("path",{fill:"#333",d:"M938.667 313.643v220.245a85.333 85.333 0 0 1-86.187 85.333l-55.723-.554L585.6 318.613a85.33 85.33 0 0 0-105.195-28.522L384 334.059a54.6 54.6 0 0 1-33.28 3.882c-49.067-9.749-65.557-26.709-49.408-50.944 15.637-23.466 82.176-70.634 199.659-141.589 3.072-1.877 6.25-3.477 9.514-4.757 49.344-22.955 105.643-14.678 168.896 24.853 29.056 18.197 93.995 40 194.774 65.387a85.33 85.33 0 0 1 64.512 82.752M85.333 566.699V320a85.333 85.333 0 0 1 85.334-85.333h109.098c-5.205 5.162-12.416 12.224-21.589 21.184-13.781 13.44-18.176 23.808-17.621 44.053a68.82 68.82 0 0 0 26.005 51.904 146.48 146.48 0 0 0 140.821 23.147l60.032-21.632a85.33 85.33 0 0 1 98.88 31.402l170.432 243.968a85.333 85.333 0 0 1-26.368 122.24L511.467 869.12a54.3 54.3 0 0 1-34.56 4.48l8.81-8.832a105.856 105.856 0 0 0 0-150.059l-172.8-172.821a81.5 81.5 0 0 0-57.642-23.787 81.5 81.5 0 0 0-57.622 23.766L122.197 617.3A53.44 53.44 0 0 1 85.333 566.7m206.208 27.669 153.28 153.237c13.44 13.44 18.688 32.939 13.76 51.2l-7.722 28.907a41.34 41.34 0 0 1-26.411 28.267 42.05 42.05 0 0 1-38.507-5.675L188.864 707.072a53.013 53.013 0 0 1-6.4-80.512l32.213-32.235a54.34 54.34 0 0 1 38.4-15.85c14.464 0 28.288 5.696 38.443 15.85v.043z"})))}},91751:function(e,t,s){"use strict";s.d(t,{Z:function(){return k}});var n=s(57437),a=s(32902),l=s(2265),o=s(16463),r=s(79225),i=s(7320),c=()=>{let{Footer:e}=a.Layout;return(0,n.jsx)(e,{style:{display:"flex",justifyContent:"space-between",padding:"20px",color:"var(--semi-color-text-2)",backgroundColor:"rgba(var(--semi-grey-0), 1)"},children:(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(i.Z,{size:"large",style:{marginRight:"8px"}}),(0,n.jsx)("span",{children:"Copyright \xa9 2024 壹择科技. All Rights Reserved. "})]})})},u=s(37006),d=s(15268),p=s(20894),x=s(14892);async function h(e){return await (0,r.v)("user/passwordUpdate",e)}var g=e=>{let[t,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)();return console.log(e),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.u_,{title:"密码修改",keepDOM:!0,visible:!0,confirmLoading:t,onOk:()=>{null==o||o.validate().then(async t=>{if(t.password!==t.password2)return a.FN.error("两次密码输入不一致");s(!0);let n=await h(t);s(!1),0===n.code?await e.refresh():a.FN.error(n.msg)}).catch(e=>{console.log(e)})},style:{width:600},onCancel:()=>{e.setVisible(!1)},children:(0,n.jsxs)(a.l0,{getFormApi:e=>{r(e)},labelPosition:"left",children:[(0,n.jsx)(a.l0.Input,{showClear:!0,field:"old_password",label:"原密码"}),(0,n.jsx)(a.l0.Input,{showClear:!0,type:"password",field:"password",label:"新密码"}),(0,n.jsx)(a.l0.Input,{showClear:!0,type:"password",field:"password2",label:"重复密码"})]})})})},m=e=>{var t;let{Header:s}=a.Layout,[r,i]=(0,l.useState)(!1),c=(0,o.useRouter)();return(0,n.jsxs)(s,{style:{backgroundColor:"var(--semi-color-bg-1)"},children:[r&&(0,n.jsx)(g,{refresh:()=>{localStorage.removeItem("access_token"),c.push("/Login")},setVisible:()=>i(!1)}),(0,n.jsx)(a.JL,{mode:"horizontal",footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.zx,{theme:"borderless",icon:(0,n.jsx)(u.Z,{size:"large"}),style:{color:"var(--semi-color-text-2)",marginRight:"12px"}}),(0,n.jsx)(a.Lt,{position:"bottomLeft",render:(0,n.jsxs)(a.Lt.Menu,{children:[(0,n.jsx)(a.Lt.Item,{onClick:()=>i(!r),icon:(0,n.jsx)(d.Z,{}),children:"修改密码"}),(0,n.jsx)(a.Lt.Item,{onClick:()=>{let e=a.FN.info({icon:(0,n.jsx)(p.Z,{}),content:"正在退出\xb7\xb7\xb7"});localStorage.removeItem("access_token"),c.push("/Login"),a.FN.close(e)},icon:(0,n.jsx)(x.Z,{}),children:"退出登录"})]}),children:(0,n.jsx)(a.qE,{color:"orange",size:"small",children:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.name})})]})})]})},f=s(62509),y=s(17863),j=s(7931),b=s(49256),v=s(73600),w=s(20211),S=s(42132),L=e=>{let{Sider:t}=a.Layout,s=(0,o.useRouter)(),r=(0,o.usePathname)(),[c,u]=(0,l.useState)(r.substring(1)||"Home");return(0,n.jsx)(t,{style:{backgroundColor:"rgb(242, 242, 244)"},children:(0,n.jsx)(a.JL,{defaultSelectedKeys:[c],selectedKeys:[c],style:{maxWidth:220,height:"100%",backgroundColor:"var(--color-fill-0)"},items:[{itemKey:"Home",text:"首页",icon:(0,n.jsx)(f.Z,{size:"large"})},{itemKey:"Data",text:"基础数据",icon:(0,n.jsx)(y.Z,{size:"large"})},{itemKey:"Project",text:"广告管理",icon:(0,n.jsx)(j.Z,{size:"large"})},{itemKey:"Custom",text:"客户管理",icon:(0,n.jsx)(b.Z,{size:"large"})},{itemKey:"ShortLink",text:"短链管理",icon:(0,n.jsx)(v.Z,{size:"large"})},{itemKey:"Account",text:"账号管理",icon:(0,n.jsx)(w.Z,{size:"large"})},{itemKey:"Setting",text:"系统设置",icon:(0,n.jsx)(S.Z,{size:"large"})}],header:{logo:(0,n.jsx)(i.Z,{style:{fontSize:36}}),text:"壹择短链",style:{paddingBottom:"12px"}},footer:{collapseButton:!0},onSelect:e=>{s.push("/"+e.itemKey)}})})},k=e=>{let{children:t}=e,{Content:s}=a.Layout,i=function(e,t){let[s,n]=(0,l.useState)(null),[a,i]=(0,l.useState)(!1),c=(0,o.useRouter)();return(0,l.useEffect)(()=>{let s=localStorage.getItem("user");s&&n(JSON.parse(s));let l=async()=>{let{data:s,code:l}=await (0,r.U)("user/current",{}),o=!!s;n(0===l?s:null),0===l&&localStorage.setItem("user",JSON.stringify(s)),i(!0),e&&a&&(e&&!t&&!o||t&&o)&&c.push(e)};s||l()},[e,t,a,c]),s}("/Login",!1);return(0,n.jsxs)(a.Layout,{style:{height:"100%"},children:[(0,n.jsx)(L,{user:i}),(0,n.jsxs)(a.Layout,{children:[(0,n.jsx)(m,{user:i}),(0,n.jsx)(s,{style:{padding:"12px",backgroundColor:"#f9f9fa"},children:(0,n.jsx)("div",{style:{borderRadius:"10px",border:"1px solid var(--semi-color-border)",height:"auto",backgroundColor:"var(--semi-color-bg-0)",padding:"24px"},children:t})}),(0,n.jsx)(c,{})]})]})}},15578:function(e,t,s){"use strict";var n=s(57437),a=s(32902),l=s(2265),o=s(19212),r=s.n(o),i=s(73975),c=s.n(i);t.Z=e=>{let[t,s]=(0,l.useState)(),o=e=>{if(!e)return e;for(let t in e)if(e[t]instanceof Date)e[t]=r()(e[t]).format("YYYY-MM-DD HH:mm:ss");else if(e[t]instanceof Array)for(let s in e[t])e[t][s]instanceof Date&&(e[t][s]=r()(e[t][s]).format("YYYY-MM-DD HH:mm:ss"));return e};return(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,n.jsxs)(a.l0,{layout:"horizontal",className:c().form,labelPosition:"left",getFormApi:e=>{s(e)},initValues:null==e?void 0:e.initValues,children:[e.fields.map(e=>{if(void 0!==e.search&&!1!==e.search){if("input"==e.type||!e.type)return(0,n.jsx)(a.l0.Input,{showClear:!0,label:e.title,field:e.dataIndex},"search."+e.dataIndex);if("select"==e.type)return(0,n.jsxs)(a.l0.Select,{label:e.title,field:e.dataIndex,initValue:-1,children:[(0,n.jsx)(a.l0.Select.Option,{label:"--请选择--",value:-1},"search.options"+e.id),e.options.map((t,s)=>(0,n.jsx)(a.l0.Select.Option,{label:t.label,value:t.value},"search.options."+e.dataIndex+"."+s))]},"search."+e.dataIndex);if("dateRange"==e.type)return(0,n.jsx)(a.l0.DatePicker,{type:"dateRange",label:e.title,field:e.dataIndex},"search."+e.dataIndex);if("dateTimeRange"==e.type)return(0,n.jsx)(a.l0.DatePicker,{type:"dateTimeRange",label:e.title,field:e.dataIndex},"search."+e.dataIndex)}}),(0,n.jsx)(a.zx,{style:{marginLeft:"auto"},type:"secondary",onClick:()=>{null==t||t.reset(),e.onSubmit({})},children:"重置"}),(0,n.jsx)(a.zx,{style:{marginLeft:"12px"},theme:"outline",type:"primary",onClick:()=>e.onSubmit(o(null==t?void 0:t.getValues())),children:"搜索"})]}),(0,n.jsx)(a.iz,{style:{padding:"0 0 0 0"}})]})}},79225:function(e,t,s){"use strict";s.d(t,{U:function(){return a},v:function(){return l}});var n=s(32902);async function a(e,t){let s="";if(t){for(let e in t)s+="&"+e+"="+t[e];s="?"+s.substring(1)}let a={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(a.Authorization=localStorage.getItem("access_token"));let l=await fetch("https://crm.yizetech.com.cn/api/"+e+s,{method:"GET",headers:a}),o=l.json();return 429===l.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===l.status?window.location.href="/Login":200!==l.status&&n.P_.open({title:"系统通知",content:"接口异常"}),o}async function l(e,t){let s={"Content-Type":"application/json",Accept:"application/json"};localStorage.getItem("access_token")&&(s.Authorization=localStorage.getItem("access_token"));let a=await fetch("https://crm.yizetech.com.cn/api/"+e,{method:"POST",headers:s,body:JSON.stringify({...t})}),l=await a.json();return 429===a.status?n.P_.open({title:"系统通知",content:"频率限制，请稍后再试"}):401===a.status?window.location.href="/Login":200!==a.status&&n.P_.open({title:"系统通知",content:"接口异常"}),l}},73975:function(e){e.exports={form:"search_form__Moi62"}}}]);